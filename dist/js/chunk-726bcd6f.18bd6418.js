(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-726bcd6f"],{8117:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(s){t.isLoading=s}}}),e("div",{staticClass:"container"},[t._m(0),e("div",{staticClass:"row d-flex justify-content-center"},[e("div",{staticClass:"col-md-10 col-sm-12 border"},[t._l(t.order.products,(function(s,a){return e("div",{key:a,staticClass:"row d-flex justify-content-between ",attrs:{id:"cartTable"}},[e("div",{staticClass:"col-6 d-flex justify-content-start align-items-center",staticStyle:{height:"80px"}},[t._v(" "+t._s(s.product.title))]),e("div",{staticClass:"col-3 d-flex justify-content-center align-items-center",staticStyle:{height:"80px"}},[t._v(" "+t._s(s.quantity)+" "+t._s(s.product.unit)+" ")]),e("div",{staticClass:"col-3 d-flex justify-content-end align-items-center",staticStyle:{height:"80px"}},[t._v(" NT. "+t._s(t._f("currency")(s.product.price)))])])})),t._l(t.products,(function(s){return e("div",{key:s.id,staticClass:"row d-flex justify-content-between",attrs:{id:s.id}},[e("div",{staticClass:"col-6 d-flex justify-content-start align-items-center",staticStyle:{height:"50px"}},[t._v(" "+t._s(s.title))]),e("div",{staticClass:"col-3 d-flex justify-content-center align-items-center",staticStyle:{height:"50px"}},[t._v(" "+t._s(t.數量)+" "+t._s(t.單位)+" ")]),e("div",{staticClass:"col-3 d-flex justify-content-end align-items-center",staticStyle:{height:"50px"}},[t._v(" "+t._s(s.origin_price))])])}))],2),e("div",{staticClass:"col-md-10 col-sm-12",staticStyle:{"background-color":"bisque"}},[e("div",{staticClass:"row d-flex justify-content-end",attrs:{id:"sumTable"}},[e("div",{staticClass:"col-md-6 d-flex justify-content-end align-items-start pt-3 pb-2"},[e("table",{staticClass:"table text-right text-primary"},[e("tbody",[e("tr",[e("td",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v(" 共 "+t._s(t.quantityTatol)+" 件商品 ")]),e("td",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v("商品金額")]),e("td",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v(" NT. "+t._s(t._f("currency")(t.order.amount))+" ")])]),e("tr",{staticClass:"text-danger"},[e("td",{staticClass:"border-top-0",attrs:{scope:"col"}}),e("td",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v("優惠券")]),e("td",{staticClass:"border-top-0",attrs:{scope:"col"}},[t.isEnabled?e("span",[t._v(" "+t._s(t.order.coupon.title)+" ")]):e("span",[t._v(" 未使用 ")])])]),e("tr",[e("td",{staticClass:"border-top-0",attrs:{scope:"col"}}),e("td",{staticClass:"border-top-0",attrs:{scope:"col"}},[t._v("運費")]),e("td",{staticClass:"border-top-0",attrs:{scope:"col"}},[t.order.amount>=999?e("span",[t._v(" NT. "+t._s(t._f("currency")(0))+" ")]):e("span",[t._v(" NT. "+t._s(t._f("currency")(80))+" ")])])]),e("tr",[e("td",{attrs:{scope:"col"}}),e("td",{attrs:{scope:"col"}},[t._v("總計")]),e("td",{staticClass:"text-danger",attrs:{scope:"col"}},[t.order.amount>=999?e("span",[t._v(" NT. "+t._s(t._f("currency")(t.order.amount))+" ")]):e("span",[t._v(" NT. "+t._s(t._f("currency")(t.order.amount+80))+" ")])])])])])])])]),e("div",{staticClass:"col-md-10 col-sm-12"},[e("div",{staticClass:"row d-flex justify-content-start",attrs:{id:"purchaseInfo"}},[e("div",{staticClass:"col-md-12 justify-content-start align-items-center pl-0 pr-0"},[e("ul",{staticClass:"list-group",staticStyle:{"border-radius":"0"}},[e("li",{staticClass:"list-group-item text-left"},[e("h5",[t._v("訂購資訊")]),e("table",{staticClass:"table text-primary"},[e("tbody",[e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"row",width:"200"}},[t._v(" 訂購人姓名 ")]),e("td",[t._v(" "+t._s(t.order.user.name)+" ")])]),e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"row",width:"200"}},[t._v(" 訂購人信箱 ")]),e("td",[t._v(" "+t._s(t.order.user.email)+" ")])]),e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"row",width:"200"}},[t._v(" 訂購人電話 ")]),e("td",[t._v(" "+t._s(t.order.user.tel)+" ")])]),e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"row",width:"200"}},[t._v(" 收件地址 ")]),e("td",[t._v(" "+t._s(t.order.user.address)+" ")])]),e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"row",width:"200"}},[t._v(" 付款方式 ")]),e("td",[t._v(" "+t._s(t.order.payment)+" ")])]),e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"row",width:"200"}},[t._v(" 備註 ")]),e("td",[null==t.order.message?e("span",[t._v(" 無 ")]):e("span",[t._v(" "+t._s(t.order.message)+" ")])])]),e("tr",[e("th",{staticClass:"px-0",attrs:{scope:"row",width:"200"}},[t._v(" 付款狀態 ")]),e("td",[t.order.paid?e("strong",{staticClass:"text-success"},[t._v("付款完成")]):e("span",{staticClass:"text-danger"},[t._v("尚未付款")])])])])])])])])]),!1===t.order.paid?e("div",{staticClass:"fnbar row d-flex justify-content-center align-items-center mt-3"},[e("div",{staticClass:"col-xs-4 d-flex justify-content-end align-items-center pr-3"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.isProcessing},on:{click:function(s){return s.preventDefault(),t.payOrder(s)}}},[t.isProcessing?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("確認付款 ")])])]):t._e(),!0===t.order.paid?e("div",{staticClass:"fnbar row d-flex justify-content-center align-items-center mt-3"},[e("div",{staticClass:"col-xs-4 d-flex justify-content-end align-items-center pr-3"},[e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/products"}},[t._v(" 返回商品頁面 ")])],1)]):t._e()])])])],1)},r=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row justify-content-center align-items-center"},[e("div",{staticClass:"col-sm-10 align-self-center"},[e("div",{staticClass:"my-3",attrs:{id:"progressBar"}},[e("ul",{staticClass:"progressbar"},[e("li",{staticClass:"active"},[t._v("確認購物車")]),e("li",{staticClass:"active"},[t._v("填寫訂購資料")]),e("li",{staticClass:"active"},[t._v("確認訂單並結帳")])])])])])}],i=(e("99af"),e("4160"),e("159b"),{name:"CheckOut",data:function(){return{isLoading:!1,fullPage:!0,order:{user:{}},orderId:"",isEnabled:!1,quantityTatol:0,uuid:"ea556ec5-4643-415e-96a7-36c78142eb82"}},created:function(){this.orderId=this.$route.params.orderId,this.getOrder()},methods:{getOrder:function(){var t=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","api/").concat(this.uuid,"/ec/orders/").concat(this.orderId);this.$http.get(s).then((function(s){t.order=s.data.data,null===t.order.coupon?t.isEnabled=!1:t.isEnabled=!0,t.calTotal(),t.isLoading=!1})).catch((function(s){t.isLoading=!1,t.$bus.$emit("message:push","資料讀取失敗，請稍後再試\n            ".concat(s),"danger")}))},calTotal:function(){var t=0;this.order.products.forEach((function(s){t+=s.quantity})),this.quantityTatol=t},payOrder:function(){var t=this;this.isLoading=!0;var s="".concat("https://course-ec-api.hexschool.io/","api/").concat(this.uuid,"/ec/orders/").concat(this.orderId,"/paying");this.$http.post(s).then((function(s){s.data.data.paid&&(t.getOrder(),t.$bus.$emit("message:push","付款成功","success")),t.isProcessing=!1})).catch((function(s){t.$bus.$emit("message:push","付款失敗，請稍後再試\n            ".concat(s),"danger"),t.isProcessing=!1}))}}}),c=i,o=e("2877"),n=Object(o["a"])(c,a,r,!1,null,null,null);s["default"]=n.exports},"99af":function(t,s,e){"use strict";var a=e("23e7"),r=e("d039"),i=e("e8b5"),c=e("861d"),o=e("7b0b"),n=e("50c4"),d=e("8418"),l=e("65f0"),u=e("1dde"),p=e("b622"),f=e("2d00"),v=p("isConcatSpreadable"),_=9007199254740991,h="Maximum allowed index exceeded",g=f>=51||!r((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),C=u("concat"),m=function(t){if(!c(t))return!1;var s=t[v];return void 0!==s?!!s:i(t)},y=!g||!C;a({target:"Array",proto:!0,forced:y},{concat:function(t){var s,e,a,r,i,c=o(this),u=l(c,0),p=0;for(s=-1,a=arguments.length;s<a;s++)if(i=-1===s?c:arguments[s],m(i)){if(r=n(i.length),p+r>_)throw TypeError(h);for(e=0;e<r;e++,p++)e in i&&d(u,p,i[e])}else{if(p>=_)throw TypeError(h);d(u,p++,i)}return u.length=p,u}})}}]);
//# sourceMappingURL=chunk-726bcd6f.18bd6418.js.map